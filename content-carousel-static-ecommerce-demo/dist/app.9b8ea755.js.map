{"version":3,"sources":["widgets/Carousel.js","app.js"],"names":["renderCarousel","isFirstRender","widgetParams","hits","container","document","querySelector","wrapper","createElement","classList","add","appendChild","carouselTitle","textContent","title","carouselListContainer","setAttribute","context","style","width","window","innerWidth","getBoundingClientRect","left","ul","innerHTML","map","hit","index","objectID","length","onSale","onSaleImg","image","name","brand","Array","rating","keys","join","ratingsNumber","price","newPrice","customCarousel","instantsearch","connectors","connectHits","searchClient","algoliasearch","search","indexName","referenceHit","description","categories","hierarchicalCategories","lvl0","lvl1","lvl2","lvl3","type","price_range","url","free_shipping","popularity","seller","searchParams","URLSearchParams","location","userToken","get","myCarousels","extraConfig","filters","hitsPerPage","relatedRef","optionalFilters","addWidgets","carousel","widgets","indexId","configure","ruleContexts","query","EXPERIMENTAL_configureRelatedItems","matchingPatterns","score","start"],"mappings":"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","file":"app.9b8ea755.js","sourceRoot":"../src","sourcesContent":["/**\n * @requires module:instantsearch\n */\n\nimport onSaleImg from '../onsale.png';\n\nconst renderCarousel = ({ widgetParams, hits }, isFirstRender) => {\n  const container = document.querySelector(widgetParams.container);\n\n  if (isFirstRender) {\n    const wrapper = document.createElement('div');\n    wrapper.classList.add('carousel-single');\n\n    container.appendChild(wrapper);\n\n    const carouselTitle = document.createElement('h2');\n    carouselTitle.textContent = widgetParams.title;\n    wrapper.appendChild(carouselTitle);\n\n    const carouselListContainer = document.createElement('ul');\n    carouselListContainer.classList.add('carousels__list-container');\n    carouselListContainer.setAttribute('id', widgetParams.context);\n    wrapper.appendChild(carouselListContainer);\n\n    wrapper.style.width = `${window.innerWidth -\n      wrapper.getBoundingClientRect().left}px`;\n  }\n\n  const ul = container.querySelector(`ul#${widgetParams.context}`);\n  ul.innerHTML = hits\n    .map(\n      (hit, index) => `\n        <li class=\"analytics\" data-object-id=\"${hit.objectID}\" style=\"${\n        index === hits.length - 1\n          ? `padding-right: ${ul.getBoundingClientRect().left + 180}px`\n          : ''\n      }\">\n          <div>\n            ${\n              hit.onSale\n                ? `<img class=\"on-sale\" src=\"${onSaleImg}\" alt=\"\">`\n                : ''\n            }\n            <img  src=\"${hit.image}\" alt=\"${hit.name}\">\n            <span>${hit.brand}</span>\n            <a href=\"#\">\n              <h3>${hit.name}</h3>\n            </a>\n            <p>${[...Array(hit.rating === 0 ? 1 : hit.rating).keys()]\n              .map(() => '⭐️')\n              .join('')}  (${hit.ratingsNumber})</p>\n              <p><span ${\n                hit.onSale ? 'style=\"text-decoration: line-through\"' : ''\n              }>$${hit.price}</span> ${\n        hit.onSale ? `<span style=\"color: red\">$${hit.newPrice}</span>` : ''\n      }</p>\n        </div>\n        </li>\n    `\n    )\n    .join('');\n};\n\nexport const customCarousel = instantsearch.connectors.connectHits(\n  renderCarousel\n);\n","import { customCarousel } from './widgets/Carousel';\n\n/* global algoliasearch instantsearch */\nconst searchClient = algoliasearch(\n  'GENYJWQIK2',\n  '61a10f4c69aee59a993ebc3021574681'\n);\n\nconst search = instantsearch({\n  indexName: 'e_commerce_transformed',\n  searchClient,\n});\n\nconst referenceHit = {\n  name:\n    'Apple - MacBook Air® (Latest Model) - 13.3\" Display - Intel Core i5 - 8GB Memory - 128GB Flash Storage - Silver',\n  description:\n    'MacBook Air features up to 8GB of memory, a fifth-generation Intel Core processor, Thunderbolt 2, great built-in apps, and all-day battery life.1 Its thin, light, and durable enough to take everywhere you go-and powerful enough to do everything once you get there, better.',\n  brand: 'Apple',\n  categories: ['Computers & Tablets', 'Laptops', 'All Laptops', 'MacBooks'],\n  hierarchicalCategories: {\n    lvl0: 'Computers & Tablets',\n    lvl1: 'Computers & Tablets > Laptops',\n    lvl2: 'Computers & Tablets > Laptops > All Laptops',\n    lvl3: 'Computers & Tablets > Laptops > All Laptops > MacBooks',\n  },\n  type: 'Apple',\n  price: 999.99,\n  price_range: '500 - 2000',\n  image: 'https://cdn-demo.algolia.com/bestbuy-0118/6443034_sb.jpg',\n  url: 'https://api.bestbuy.com/click/-/6443034/pdp',\n  free_shipping: true,\n  rating: 3,\n  popularity: 21465,\n  ratingsNumber: 368,\n  onSale: true,\n  newPrice: 786.64,\n  seller: 'RandomSeller#4',\n  objectID: '6443034',\n};\n\nconst searchParams = new URLSearchParams(window.location.search);\n\nconst userToken = searchParams.get('userToken') || '';\n\nconst myCarousels = [\n  {\n    title: 'Popular right now',\n    context: 'popular',\n    indexName: 'e_commerce_transformed',\n  },\n  {\n    title: 'Best rated items',\n    context: 'best_rated',\n    indexName: 'e_commerce_transformed_ratings_asc',\n  },\n  {\n    title: 'On Sale',\n    context: 'on_sale',\n    indexName: 'e_commerce_transformed',\n    extraConfig: {\n      filters: 'onSale:true',\n    },\n  },\n  // {\n  //   title: 'Last chance',\n  //   context: 'last-chance',\n  //   indexName: 'perso_movies_carousel_last_chance',\n  // },\n\n  {\n    title: 'What you need to Work From Home',\n    context: 'work_from_home',\n    indexName: 'e_commerce_transformed',\n    extraConfig: {\n      hitsPerPage: 6,\n    },\n  },\n  {\n    title: 'Based on your purchase of Apple - Macbook Pro',\n    context: 'related',\n    indexName: 'e_commerce_transformed',\n    relatedRef: referenceHit,\n  },\n  {\n    title: 'These might interest you',\n    context: 'curated',\n    indexName: 'e_commerce_transformed',\n    extraConfig: {\n      optionalFilters: [\n        'hierarchicalCategories.lvl0: Wearable Technology<score=5>',\n        'hierarchicalCategories.lvl1: Cell Phones > All Cell Phones with Plans<score=5>',\n      ],\n    },\n  },\n];\n\nconst addWidgets = () => {\n  search.addWidgets(\n    myCarousels.map(carousel =>\n      instantsearch.widgets\n        .index({\n          indexName: carousel.indexName,\n          indexId: carousel.context,\n        })\n        .addWidgets(\n          !carousel.relatedRef\n            ? [\n                instantsearch.widgets.configure({\n                  ruleContexts: carousel.context,\n                  hitsPerPage: 15,\n                  query: '',\n                  ...carousel.extraConfig,\n                }),\n                customCarousel({\n                  container: '.carousels',\n                  title: carousel.title,\n                  context: carousel.context,\n                }),\n              ]\n            : [\n                instantsearch.widgets.configure({\n                  ruleContexts: carousel.context,\n                  hitsPerPage: 15,\n                  query: '',\n                  ...carousel.extraConfig,\n                }),\n                instantsearch.widgets.EXPERIMENTAL_configureRelatedItems({\n                  hit: carousel.relatedRef,\n                  matchingPatterns: {\n                    brand: { score: 3 },\n                    // categories: { score: 2 },\n                  },\n                }),\n                customCarousel({\n                  container: '.carousels',\n                  title: carousel.title,\n                  context: carousel.context,\n                }),\n              ]\n        )\n    )\n  );\n};\n\naddWidgets();\n\nsearch.start();\n"]}